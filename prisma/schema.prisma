datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String          @id @default(cuid())
  email        String          @unique
  passwordHash String          // bcrypt hash
  name         String?         
  plan         Plan            @default(FREE)
  credits      Int             @default(100) // generations left, for example

  generations  SvgGeneration[]

  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt
}

model SvgGeneration {
  id         String   @id @default(cuid())
  user       User     @relation(fields: [userId], references: [id])
  userId     String

  prompt     String
  svg        String   // the actual SVG code
  style      String?  // 'outline', 'duotone', etc.
  model      String?  // 'gpt-4.1', etc.
  tokensUsed Int?     // optional

  createdAt  DateTime @default(now())
}

enum Plan {
  FREE
  STUDENT
  PRO
}
